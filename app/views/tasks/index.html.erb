<div class="w-full">
  <h1 class="text-3xl font-bold mb-6">My Tasks</h1>

  <%= turbo_frame_tag "stats", src: stats_tasks_path, loading: :lazy do %>
    <div class="p-4 bg-gray-100 rounded mb-6">
      Loading statistics...
    </div>
  <% end %>

  <div id="task-counter">
    <%= render "task_filter",
               total: @tasks.count,
               todo: @tasks.todo.count,
               in_progress: @tasks.in_progress.count,
               done: @tasks.done.count %>
  </div>

  <%= turbo_frame_tag "task_form" do %>
    <%= render "form", task: @task %>
  <% end %>

  <!-- Search Box -->
  <div data-controller="search" data-search-delay-value="500" class="mb-4">
    <input
      type="text"
      autocomplete="on"
      placeholder="Search tasks..."
      data-search-target="input"
      data-action="input->search#filter"
      class="w-full px-4 py-2 boarder rounded"
    >

    <div id="tasks"
         class="space-y-2"
         data-controller="sortable"
         data-search-target="container">
      <%= render @tasks %>
    </div>
  </div>
</div>
